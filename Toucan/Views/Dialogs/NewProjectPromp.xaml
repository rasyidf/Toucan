<ui:FluentWindow
    x:Class="Toucan.NewProjectPrompt"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Toucan"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    MinWidth="250"
    d:DesignWidth="370" 
    WindowStartupLocation="CenterOwner"
    mc:Ignorable="d">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="16*"/>
            <ColumnDefinition Width="9*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition x:Name="titleBar"/>
            <RowDefinition x:Name="contentRow"/>
        </Grid.RowDefinitions>
        <ui:TitleBar
            Title="New Project"
            Grid.ColumnSpan="2"
            VerticalAlignment="Center"
            ShowMaximize="false"
            ShowMinimize="false"/>
        <Grid
            Grid.Row="1"
            Grid.RowSpan="2"
            Grid.ColumnSpan="2"
            Margin="0,2,0,0">
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <StackPanel Margin="10,10,10,10">
                <TextBlock Text="Project Name"
                           FontWeight="SemiBold"/>
                <ui:TextBox
                    x:Name="ResponseTextBox"
                    Margin="0,6,0,10"
                    PlaceholderText="My Translation Project"/>

                <Grid Margin="0,0,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="120"/>
                    </Grid.ColumnDefinitions>
                    <StackPanel>
                        <TextBlock Text="Framework"
                                   FontWeight="SemiBold"/>
                        <ComboBox ItemsSource="{Binding Frameworks}"
                                  SelectedItem="{Binding SelectedFramework}"
                                  Margin="0,6,0,0"/>
                    </StackPanel>
                    <StackPanel Grid.Column="1"
                                Margin="8,0,0,0">
                        <TextBlock Text="Project Folder"
                                   FontWeight="SemiBold"/>
                        <ui:Button Content="Browse..."
                                   Margin="0,6,0,0"
                                   Command="{Binding BrowseFolderCommand}"/>
                    </StackPanel>
                </Grid>

                <TextBlock Text="{Binding ProjectFolder}"
                           FontSize="11"
                           Foreground="Gray"
                           Margin="0,0,0,10"
                           TextTrimming="CharacterEllipsis"/>

                <Separator Margin="0,6,0,6"/>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Languages"
                               FontWeight="SemiBold"
                               VerticalAlignment="Center"/>
                    <StackPanel Grid.Column="1"
                                Orientation="Horizontal">
                        <ui:Button Content="Add"
                                   Padding="8,4"
                                   Margin="0,0,6,0"
                                   Command="{Binding AddLanguageCommand}"/>
                    </StackPanel>
                </Grid>

                <ScrollViewer  Margin="0,6,0,10">
                    <ItemsControl ItemsSource="{Binding Languages}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border BorderThickness="0,0,0,1"
                                        BorderBrush="#2A2A2A"
                                        Padding="6,4">
                                    <Grid>
                                        <TextBlock Text="{Binding}"
                                                   FontSize="13"
                                                   VerticalAlignment="Center"/>
                                        <ui:Button Content="Remove"
                                                   HorizontalAlignment="Right"
                                                   Padding="6,2"
                                                   Command="{Binding DataContext.RemoveLanguageCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                   CommandParameter="{Binding}"/>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>

                <TextBlock Text="Translation files will be automatically created in the selected folder."
                           FontSize="11"
                           Foreground="Gray"
                           TextWrapping="Wrap"/>
            </StackPanel>
            <ui:Button
                Grid.RowSpan="2"
                x:Name="CreateButton"
                Width="90"
                Margin="0,0,10,10"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Click="OKButton_Click"
                Content="Create"
                IsEnabled="{Binding IsValid}"/>
        </Grid>
    </Grid>
</ui:FluentWindow>
